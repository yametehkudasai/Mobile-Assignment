<ion-content [fullscreen]="true" class="gradient-profile-page">

  <div class="floating-circles">
    <div class="circle"></div>
    <div class="circle"></div>
    <div class="circle"></div>
    <div class="circle"></div>
    <div class="circle"></div>
  </div>

  <div class="food-patterns">
    <ion-icon name="pizza-outline" class="food-icon"></ion-icon>
    <ion-icon name="fast-food-outline" class="food-icon"></ion-icon>
    <ion-icon name="ice-cream-outline" class="food-icon"></ion-icon>
    <ion-icon name="restaurant-outline" class="food-icon"></ion-icon>
  </div>

  <div class="grid-pattern"></div>
  <div class="light-beams"></div>

  <!-- Header with Back Button -->
  <div class="header-bar">
    <button class="back-btn" (click)="goBack()">
      <ion-icon name="arrow-back"></ion-icon>
    </button>
    <h1 class="header-title">My Profile</h1>
    <div class="header-spacer"></div>
  </div>

  <!-- Profile Content -->
  <div class="profile-content">

    <!-- Avatar Section -->
    <div class="avatar-section">
      <div class="avatar-wrapper">
        <img [src]="userProfile?.avatar" alt="Profile" class="avatar-image">
        <button class="edit-avatar-btn" (click)="changeAvatar()">
          <ion-icon name="camera"></ion-icon>
        </button>
      </div>
      <h2 class="user-name">{{userProfile?.name}}</h2>
      <p class="user-email">{{userProfile?.email}}</p>

      <!-- admin badge -->
      <ion-badge color="warning" *ngIf="userProfile?.isAdmin" class="admin-badge">
        <ion-icon name="shield-checkmark"></ion-icon>
        Administrator
      </ion-badge>
    </div>

    <!-- Info Cards -->
    <div class="info-cards">

      <!-- Personal Info Card -->
      <div class="info-card">
        <div class="card-header">
          <ion-icon name="person-outline" class="header-icon"></ion-icon>
          <h3 class="card-title">Personal Information</h3>
        </div>

        <div class="info-row">
          <div class="info-label">
            <ion-icon name="person-outline"></ion-icon>
            <span>Full Name</span>
          </div>
          <div class="info-value">{{userProfile?.name}}</div>
        </div>

        <div class="info-row">
          <div class="info-label">
            <ion-icon name="mail-outline"></ion-icon>
            <span>Email</span>
          </div>
          <div class="info-value">{{userProfile?.email}}</div>
        </div>

        <div class="info-row">
          <div class="info-label">
            <ion-icon name="call-outline"></ion-icon>
            <span>Phone</span>
          </div>
          <div class="info-value">{{userProfile?.phone || 'Not set'}}</div>
        </div>

        <div class="info-row">
          <div class="info-label">
            <ion-icon name="location-outline"></ion-icon>
            <span>Address</span>
          </div>
          <div class="info-value">{{userProfile?.address || 'Not set'}}</div>
        </div>

        <button class="action-btn edit-btn" (click)="editProfile()">
          <ion-icon name="create-outline"></ion-icon>
          <span>Edit Profile</span>
        </button>
      </div>

      <!-- Security Card -->
      <div class="info-card">
        <div class="card-header">
          <ion-icon name="shield-checkmark-outline" class="header-icon"></ion-icon>
          <h3 class="card-title">Security</h3>
        </div>

        <button class="action-btn password-btn" (click)="changePassword()">
          <ion-icon name="lock-closed-outline"></ion-icon>
          <span>Change Password</span>
        </button>
      </div>

      <!-- Admin Panel Card - 只有admin能看到 -->
      <div class="info-card" *ngIf="userProfile?.isAdmin">
        <div class="card-header">
          <ion-icon name="settings-outline" class="header-icon"></ion-icon>
          <h3 class="card-title">Admin Panel</h3>
        </div>

        <button class="action-btn admin-btn" (click)="viewAllAccounts()">
          <ion-icon name="people-outline"></ion-icon>
          <span>Manage All Accounts</span>
        </button>
      </div>

      <!-- Account Card -->
      <div class="info-card">
        <div class="card-header">
          <ion-icon name="log-out-outline" class="header-icon"></ion-icon>
          <h3 class="card-title">Account</h3>
        </div>

        <button class="action-btn logout-btn" (click)="logout()">
          <ion-icon name="log-out-outline"></ion-icon>
          <span>Logout</span>
        </button>
      </div>

    </div>

  </div>

</ion-content>